<html>
	<head>
		<title>Weight Loss Tracker</title>

		<link rel="stylesheet" type="text/css" href="./style.css" />
		<!-- linking calendar css and js file  -->
		<link href="/full-cal-css.css" rel="stylesheet" />
		<script src="/full-cal-js.js"></script>

		<!-- Compiled and minified CSS -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" />
		<!-- Compiled and minified JavaScript -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
		<!--Import Google Icon Font-->
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

		<script>
			document.addEventListener('DOMContentLoaded', function () {
				let calendarEl = document.querySelector('#calendar');
				let calendar = new FullCalendar.Calendar(calendarEl, {
					initialView: 'dayGridMonth', //sets the view
					height: 'auto',
					// sets the toolbar in the middle can add more if need be
					headerToolbar: {
						center: 'addEventButton',
					},

					// adds our own button to the toolbar
					customButtons: {
						addEventButton: {
							text: 'add weight',
							click: function () {
								// prompts user for date, weight, and how they are feeling (description)
								let dateStr = prompt('Enter a date in YYYY-MM-DD format');
								let weightStr = prompt('Enter a weight in pounds');
								let isnum = /^\d+$/.test(weightStr); //test of weightstr is all ints
								console.log(isnum);

								let date = new Date(dateStr + 'T00:00:00');

								if (!isNaN(date.valueOf())) {
									if (isnum) {
										// valid? if true then add event
										calendar.addEvent({
											title: weightStr,
											start: date,
											allDay: true,
										});
									}
								} else if (isNaN(date.valueOf())) {
									// if not valid date then tell them
									alert('Invalid date.');
								} else if (!isnum) {
									alert('Invalid weight.');
								}
							},
						},
					},
					//adding some custom events
					events: [
						{
							title: '250', // a property!
							start: '2021-03-01', // a property!
							allDay: true,
						},
						{
							title: '249', // a property!
							start: '2021-03-02', // a property!
							allDay: true,
						},
						{
							title: '248', // a property!
							start: '2021-03-03', // a property!
							allDay: true,
						},
						{
							title: '247', // a property!
							start: '2021-03-04', // a property!
							allDay: true,
						},
						{
							title: '246', // a property!
							start: '2021-03-05', // a property!
							allDay: true,
						},
						{
							title: '246', // a property!
							start: '2021-03-06', // a property!
							allDay: true,
						},
						{
							title: '245', // a property!
							start: '2021-03-07', // a property!
							allDay: true,
						},
						{
							title: '244', // a property!
							start: '2021-03-08', // a property!
							allDay: true,
						},
					],
				});
				calendar.render();
			});
		</script>
	</head>
	<body>
		<nav>
			<div class="nav-wrapper">
				<a href="#" class="brand-logo"><i class="material-icons left">calendar_today</i></a>
				<ul class="right hide-on-med-and-down">
					<li>
						<a href="motivation.html"><i class="material-icons left">tungsten</i>Daily motivation</a>
					</li>
					<li>
						<a href="suggestions.html"><i class="material-icons left">build</i>Suggestions</a>
					</li>
					<li>
						<a href="admin.html"><i class="material-icons left">admin_panel_settings</i>Admin</a>
					</li>
				</ul>
			</div>
		</nav>

		<div id="calendar"></div>
	</body>
</html>
